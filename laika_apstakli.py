# -*- coding: utf-8 -*-
"""Laika apstakli.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1G8MMMqtPGJYR9lc7mp48khsHZVV_590G
"""

import requests
import time

rus = {
	''
}

par = {
	"lang":"ru",
	"lat": 56,
	"lon": 23,
	"appid": "84061a2a5ff54b490d63bd38d557b06d",
	"units": "metric"
}

print("Соединение с сервером...")

r = requests.get('http://api.openweathermap.org/data/2.5/weather?', params = par)
r_hourly = requests.get('http://api.openweathermap.org/data/2.5/forecast?', params = par)


""" CURRENT """

print("-------------------Погода сейчас-------------------")

data = r.json()
print('***********', end ='')
descript = data.get("weather")[0].get("description")
print(descript, end = '')
print('***********')

temp = data.get("main").get("temp")
#temp = round(1.8*(temp-273)+32)
#temp = round((5/9)*(temp-32))
print("Температура(*C)",temp)

hum = data.get("main").get("humidity")
print("Влажность", hum,"%")

wind_speed = data.get("wind").get("speed")
print('Скорость ветра', wind_speed)

"""BY HOURS"""

print("-------------------На ближайшее время-------------------")

forecast = r_hourly.json().get('list')[:5]

for i in forecast:
	dt = i.get('dt_txt')
	print(dt,':')

	print("Будет {}".format(i.get("weather")[0].get("description")))
	print("Подробно:")
	print("	Температура:", i.get("main").get("temp"), "*C")
	print("	Влажность:",i.get("main").get("humidity"), "%")
	press = int(i.get("main").get("pressure"))
	print("	Давление(мм.рт.ст):", press/133)
	print("-----------------------------------------------------------------------------")


print("Данные от openweathermap.org")

# подключаем библиотеку для работы с запросами
import requests
# указываем город
city = 'Елгава'
# формируем запрос
url = 'https://api.openweathermap.org/data/2.5/weather?q='+city+'&units=metric&lang=ru&appid=79d1ca96933b0328e1c7e3e7a26cb347'
# отправляем запрос на сервер и сразу получаем результат
weather_data = requests.get(url).json()
# получаем данные о температуре и о том, как она ощущается
temperature = round(weather_data['main']['temp'])
temperature_feels = round(weather_data['main']['feels_like'])
wind_speed = round(weather_data['wind']['speed'])
# сообщаем про ветреную погоду
wind = data["wind"]["speed"]
humidity = data["main"]["humidity"]
pressure = data["main"]["pressure"]
print('Сейчас в городе', city, str(temperature), '°C')
print('Ощущается как', str(temperature_feels), '°C')
print('Влажность', city, str(humidity), '°%')
print('Давление', city, str(pressure), 'mm')
print('Скорость ветра', city, str(wind), 'km/h')
print("Условия:", data['weather'][0]['description'])
print( i['dt_txt'], '{0:+3.0f}'.format(i['main']['temp']), i['weather'][0]['description'] )